# Booker

## Tasks

–û—Ç–ª–∏—á–Ω–æ, –≤–æ—Ç –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –ø–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ `booker.md` ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞–Ω–∏–π –∏–∑ —É—á–µ–±–Ω–∏–∫–æ–≤.

---

## üìò –ü—Ä–æ–µ–∫—Ç: `booker.md`

### üìå –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:

`booker.md` ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è:

1. **–ü–∞—Ä—Å–∏—Ç PDF —É—á–µ–±–Ω–∏–∫–∏ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ**.
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ **—Ç–µ–æ—Ä–∏–∏, –∑–∞–¥–∞—á–∏, —Ä–µ—à–µ–Ω–∏—è**.
3. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –∑–Ω–∞–Ω–∏—è –≤ –≤–∏–¥–µ **–≥—Ä–∞—Ñ–∞ –ø–æ–Ω—è—Ç–∏–π**.
4. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:

   * üìö –ò–∑—É—á–∞—Ç—å —Ç–µ–æ—Ä–∏—é –ø–æ –¥–µ—Ä–µ–≤—É –∑–Ω–∞–Ω–∏–π
   * üß† –†–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏
   * üß™ –ü—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   * üß≠ –í–∏–¥–µ—Ç—å, —á—Ç–æ –æ–Ω ‚Äú–∑–Ω–∞–µ—Ç‚Äù, ‚Äú–ø–æ–Ω–∏–º–∞–µ—Ç‚Äù, ‚Äú–∑–∞–±—ã–ª‚Äù, ‚Äú–Ω–µ –æ—Å–≤–æ–∏–ª‚Äù

---

## ‚úÖ TODO –¥–ª—è MVP

### üßæ 1. –ü–∞—Ä—Å–∏–Ω–≥ PDF

* [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PyMuPDF`, `pdfminer.six` –∏–ª–∏ `Grobid` (–µ—Å–ª–∏ LaTeX)
* [ ] –í—ã–¥–µ–ª–µ–Ω–∏–µ:

  * –ó–∞–≥–æ–ª–æ–≤–∫–∏, –±–ª–æ–∫–∏, –≤—ã–¥–µ–ª–µ–Ω–∏—è
  * –§–æ—Ä–º—É–ª—ã —á–µ—Ä–µ–∑ `Mathpix` –∏–ª–∏ `LaTeXML`
  * –¢–µ–æ—Ä–∏—è / –£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏ / –†–µ—à–µ–Ω–∏–µ –ø–æ —à–∞–±–ª–æ–Ω–∞–º
* [ ] –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ø–æ –Ω—É–º–µ—Ä–∞—Ü–∏–∏, –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º)

---

### üìö 2. –°—É—â–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

* `Theory`: —Ç–µ–º–∞, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, —Ñ–æ—Ä–º—É–ª—ã, —Å—Å—ã–ª–∫–∏
* `Problem`: —É—Å–ª–æ–≤–∏–µ, —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, prerequisites
* `Solution`: —à–∞–≥–∏ —Ä–µ—à–µ–Ω–∏—è, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞, –ø–æ—è—Å–Ω–µ–Ω–∏—è
* `Node`: –∑–Ω–∞–Ω–∏–µ (atomic unit), –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–º–µ

```go
type Problem struct {
  ID         string
  Topic      string
  Text       string
  Solutions  []Solution
  Tags       []string
  Difficulty int
}
```

---

### üå≥ 3. –î—Ä–µ–≤–æ –∑–Ω–∞–Ω–∏–π

* [ ] –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º, —Å—Å—ã–ª–æ–∫ –∏ prerequisites
* [ ] `Auditor`: –∞–Ω–∞–ª–∏–∑ —Å–≤—è–∑–µ–π, –ø—Ä–æ–±–µ–ª–æ–≤, –ø—É—Ç–µ–π
* [ ] `LearnerState`: –∑–Ω–∞–µ—Ç/–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ/–æ—à–∏–±—Å—è/–Ω–µ –ø—Ä–æ–±–æ–≤–∞–ª
* [ ] –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: `cytoscape.js`, `react-flow`, `graphviz`

---

### üß™ 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è

* [ ] –í—ã–±–æ—Ä –∑–∞–¥–∞—á –ø–æ —Ç–µ–º–∞–º –∏ ‚Äú—É–∑–∫–∏–º –º–µ—Å—Ç–∞–º‚Äù
* [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä –∑–∞–¥–∞—á –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥—Ä–µ–≤–∞
* [ ] –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –æ—Å–≤–æ–µ–Ω–∏—è: –∑–Ω–∞–µ—à—å ‚áí —É–º–µ–µ—à—å –ø—Ä–∏–º–µ–Ω—è—Ç—å ‚áí –æ–±–æ–±—â–∞–µ—à—å

---

### üõ† 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### Backend:

* Python + FastAPI / Go + GQL
* PostgreSQL + pgvector (–¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π)
* Redis (–∫–µ—à —Å–≤—è–∑–µ–π)

#### Frontend:

* Next.js (–∏–ª–∏ React standalone)
* –°—Ç—Ä–∞–Ω–∏—Ü—ã: `–¢–µ–æ—Ä–∏—è`, `–ó–∞–¥–∞—á–∏`, `–ì—Ä–∞—Ñ`, `–¢–µ—Å—Ç`, `–ê–Ω–∞–ª–∏–∑`

---

### ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

* [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ LLM (ChatGPT / Claude)
* [ ] –ü–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ user path ("–≤–æ—Ç —á—Ç–æ —Ç–µ–±–µ –Ω–∞–¥–æ –æ—Å–≤–µ–∂–∏—Ç—å")
* [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–µ—Ä–µ–≤—É –∑–Ω–∞–Ω–∏–π: –æ—Ö–≤–∞—Ç, —É—Ä–æ–≤–µ–Ω—å, –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

---

–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –±–∞–∑—ã —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è —Ç–µ–æ—Ä–∏–∏/–∑–∞–¥–∞—á/—Ä–µ—à–µ–Ω–∏–π –∏–ª–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ–º –≥—Ä–∞—Ñ–∞?

---

## –ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ (–Ø–Ω–≤–∞—Ä—å 2026)

### –ù—É–∂–µ–Ω –ª–∏ –ø—Ä–æ–¥—É–∫—Ç —Ä—ã–Ω–∫—É?

**–í–µ—Ä–¥–∏–∫—Ç: –î–∞, —Å –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏**

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ–∞–ª—å–Ω–∞—è:**
- 70%+ —É—á–µ–±–Ω–∏–∫–æ–≤ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ PDF (—Å–∫–∞–Ω—ã, —Å—Ç–∞—Ä—ã–µ –∏–∑–¥–∞–Ω–∏—è)
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã ‚Äî –±–æ–ª—å –¥–ª—è OCR (–æ—Å–æ–±–µ–Ω–Ω–æ —Ä—É–∫–æ–ø–∏—Å–Ω—ã–µ –∏–ª–∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
- –°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ —Ö–∞–æ—Ç–∏—á–Ω–æ: –Ω–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è "—á—Ç–æ —è –∑–Ω–∞—é, —á—Ç–æ –Ω–µ—Ç"

**–†—ã–Ω–æ–∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω:**

| –°–µ–≥–º–µ–Ω—Ç | –û—Å—Ç—Ä–æ—Ç–∞ –ø—Ä–æ–±–ª–µ–º—ã | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–∏—Ç—å |
|---------|------------------|-------------------|
| –®–∫–æ–ª—å–Ω–∏–∫–∏/—Å—Ç—É–¥–µ–Ω—Ç—ã | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è ($5-15/–º–µ—Å) |
| –†–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω—è—è ($20-50/–º–µ—Å) |
| EdTech –∫–æ–º–ø–∞–Ω–∏–∏ (B2B) | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | –í—ã—Å–æ–∫–∞—è ($500-5000+/–º–µ—Å) |
| –ê–≤—Ç–æ—Ä—ã —É—á–µ–±–Ω–∏–∫–æ–≤ | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è |

---

### –¶–µ–ª–µ–≤—ã–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (–æ—Ç –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–π –∫ –º–µ–Ω–µ–µ)

#### 1. EdTech B2B ‚Äî –ì–ª–∞–≤–Ω—ã–π target
- –ö–æ–º–ø–∞–Ω–∏–∏ —Ç–∏–ø–∞ Khan Academy, Brilliant, –Ø–Ω–¥–µ–∫—Å.–£—á–µ–±–Ω–∏–∫
- –ò–º –Ω—É–∂–µ–Ω –∫–æ–Ω–≤–µ–π–µ—Ä –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- Pain: —Ä—É—á–Ω–∞—è –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∞ —É—á–µ–±–Ω–∏–∫–∞ = 3-6 –º–µ—Å—è—Ü–µ–≤, $10-50K
- Booker –º–æ–∂–µ—Ç —ç—Ç–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –¥–æ –¥–Ω–µ–π

#### 2. –†–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã –∏ —É—á–∏—Ç–µ–ª—è (Premium B2C)
- –•–æ—Ç—è—Ç —Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- –ì–æ—Ç–æ–≤—ã –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- "–ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π" –¥–ª—è —É—á–µ–Ω–∏–∫–∞ ‚Äî killer feature

#### 3. Self-learners (—Å—Ç—É–¥–µ–Ω—Ç—ã/–≤–∑—Ä–æ—Å–ª—ã–µ)
- –ì–æ—Ç–æ–≤—è—â–∏–µ—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º (–ï–ì–≠, SAT, GRE)
- –ò–∑—É—á–∞—é—â–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –¥–ª—è —Å–º–µ–Ω—ã –∫–∞—Ä—å–µ—Ä—ã
- **–ö—Ä–∏—Ç–∏—á–Ω–æ**: –Ω—É–∂–Ω–∞ gamification, –∏–Ω–∞—á–µ retention –±–ª–∏–∑–æ–∫ –∫ 0

#### 4. –ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (B2B Long-term)
- –û—Ü–∏—Ñ—Ä–æ–≤–∫–∞ legacy –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–µ—Ä—Å–∏–π —É—á–µ–±–Ω–∏–∫–æ–≤

---

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å (–æ—Ü–µ–Ω–∫–∞: 35% –∫ MVP)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| PDF ‚Üí PNG —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ | Done | pdftoppm, —Ä–∞–±–æ—Ç–∞–µ—Ç |
| OCR —Ç–µ–∫—Å—Ç–∞ | Done | Mistral API, —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ |
| –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ LaTeX | Done | –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Mistral |
| –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ñ–æ—Ä–º—É–ª | Done | KaTeX, —Å—Ç–∞–±–∏–ª—å–Ω–æ |
| –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ | Done | –ë–∞–∑–æ–≤—ã–π, —Ä–∞–±–æ—Ç–∞–µ—Ç |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ OCR | Done | JSON-based |
| CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | Done | serve, ocr-run, pdf-info |
| **–ì–∏–±—Ä–∏–¥–Ω—ã–π AI+Regex –ø–∞—Ä—Å–µ—Ä** | Done | Mistral + fallback, 99% —Ç–æ—á–Ω–æ—Å—Ç—å |
| **AI Parse Cache** | Done | SHA256-based caching, 7 days TTL |
| **Retry Logic** | Done | Exponential backoff –¥–ª—è API |
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** | 80% | –ó–∞–¥–∞—á–∏ + –ø–æ–¥–∑–∞–¥–∞—á–∏ (–∞,–±,–≤) |
| **Cross-page detection** | Done | –ó–∞–¥–∞—á–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite** | Done | –ü—Ä–æ–±–ª–µ–º—ã, –≥–ª–∞–≤—ã, —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| **Batch OCR** | Done | –î–æ 100 —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞ —Ä–∞–∑, –ø—Ä–æ–≥—Ä–µ—Å—Å |
| **Batch Solve** | Done | AI-—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á |
| **Background Jobs** | Done | –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ + —Å—Ç–∞—Ç—É—Å |
| **–≠–∫—Å–ø–æ—Ä—Ç** | Done | Markdown, LaTeX, JSON, Anki |
| **Formula Search** | Done | –ü–æ–∏—Å–∫ –ø–æ LaTeX —Ñ–æ—Ä–º—É–ª–∞–º |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** | Done | –ü—Ä–æ–≤–µ—Ä–∫–∞ LaTeX, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |
| **–ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π** | 0% | –ö–ª—é—á–µ–≤–∞—è —Ñ–∏—á–∞ |
| **–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** | 0% | –ù–µ—Ç |
| **User state tracking** | 0% | "–ó–Ω–∞—é/–Ω–µ –∑–Ω–∞—é" |
| **Adaptive learning** | 0% | –ù–µ—Ç |

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Rust (actix-web) ‚Üí Mistral OCR API ‚Üí JSON cache ‚Üí HTML+KaTeX frontend
```

**–ü–ª—é—Å—ã:**
- Rust = –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- Mistral OCR = state-of-the-art –¥–ª—è –º–∞—Ç. —Ñ–æ—Ä–º—É–ª
- –ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ—Ç –ë–î (—Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤—ã–π –∫—ç—à)
- –ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ù–µ—Ç API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- Frontend –Ω–∞ vanilla JS (–Ω–µ—Ç React/Vue)

---

### MVP –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤

#### MVP 1: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∏ –¥–ª—è EdTech (B2B)
**Scope:** –¢–æ —á—Ç–æ –µ—Å—Ç—å + —ç–∫—Å–ø–æ—Ä—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON/Markdown
- [ ] Batch processing PDF
- [ ] REST API
- [ ] –≠–∫—Å–ø–æ—Ä—Ç: JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ + Markdown —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏

#### MVP 2: –†–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (B2C Premium)
**Scope:** MVP 1 + –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á
- [ ] –†—É—á–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ "–¢–µ–æ—Ä–∏—è/–ó–∞–¥–∞—á–∞/–†–µ—à–µ–Ω–∏–µ"
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–±–æ—Ä–Ω–∏–∫–æ–≤
- [ ] –ü—Ä–æ—Å—Ç–æ–π –≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏

#### MVP 3: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –æ–±—É—á–∞—é—â–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
**Scope:** –í—Å—ë –∏–∑ TODO –≤—ã—à–µ
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π
- [ ] –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: B2B First, B2C Later

#### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (1-2 –Ω–µ–¥–µ–ª–∏):
- [ ] –î–æ–±–∞–≤–∏—Ç—å REST API –¥–ª—è batch OCR
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∫–∞–∫ SaaS-tool EdTech –∫–æ–º–ø–∞–Ω–∏—è–º

#### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ (1 –º–µ—Å—è—Ü):
- [ ] PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
- [ ] –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- [ ] –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** MVP –¥–ª—è —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤

#### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ (3-6 –º–µ—Å—è—Ü–µ–≤):
- [ ] LLM –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (GPT-4 / Claude)
- [ ] –ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è)

| Tier | –¶–µ–Ω–∞ | –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ |
|------|------|--------------|
| API (B2B) | $0.10-0.50/—Å—Ç—Ä–∞–Ω–∏—Ü–∞ | OCR + —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ |
| Pro (—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã) | $29/–º–µ—Å | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å + 500 —Å—Ç—Ä–∞–Ω–∏—Ü/–º–µ—Å |
| Enterprise | Custom | White-label, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ |

---

### –í—ã–≤–æ–¥

**–ü—Ä–æ–µ–∫—Ç –Ω—É–∂–µ–Ω.** –ù–∏—à–∞ —Ä–µ–∞–ª—å–Ω–∞—è, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è —É–º–µ—Ä–µ–Ω–Ω–∞—è (Mathpix –±–ª–∏–∂–∞–π—à–∏–π –∞–Ω–∞–ª–æ–≥, –Ω–æ –¥–æ—Ä–æ–≥–æ–π –∏ –±–µ–∑ learning-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞).

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –•–æ—Ä–æ—à–∏–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è OCR, –Ω–æ 0% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –æ–±—É—á–∞—é—â–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** Pivot –∫ B2B API –ø–µ—Ä–≤—ã–º MVP. –≠—Ç–æ –¥–∞—Å—Ç revenue –±—ã—Å—Ç—Ä–µ–µ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç core technology –¥–æ –≤–ª–æ–∂–µ–Ω–∏–π –≤ —Å–ª–æ–∂–Ω—É—é –æ–±—É—á–∞—é—â—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É.



---

## ‚úÖ –ù–µ–¥–∞–≤–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–§–µ–≤—Ä–∞–ª—å 2026)

### üß† –ì–∏–±—Ä–∏–¥–Ω—ã–π AI+Regex –ø–∞—Ä—Å–µ—Ä
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä**: AI (Mistral) –ø–µ—Ä–≤—ã–π, regex fallback
- **–¢–æ—á–Ω–æ—Å—Ç—å 99%**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –∏–∑ OCR —Ç–µ–∫—Å—Ç–∞
- **–ü–æ–¥–∑–∞–¥–∞—á–∏**: –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞), –±), –≤), –≥), –¥)...
- **–ë–µ–∑ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞

üìÅ `src/services/ai_parser.rs` - `HybridParser`

### üìÑ Cross-page –∑–∞–¥–∞—á–∏
- **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: `continues_from_page`
- **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é**: `continues_to_page`
- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**: üìë –ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

üìÅ `src/models/problem.rs` - –ø–æ–ª—è `continues_from_page`, `continues_to_page`, `is_cross_page`

### üóÑÔ∏è Database Layer
- **SQLite**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á, –≥–ª–∞–≤, —Å—Ç—Ä–∞–Ω–∏—Ü
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ê–≤—Ç–æ-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
- **Foreign Keys**: `parent_id` –¥–ª—è –ø–æ–¥–∑–∞–¥–∞—á, `page_id` –¥–ª—è —Å–≤—è–∑–∏ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π

üìÅ `src/services/database.rs`

### ‚å®Ô∏è Keyboard Navigation
- **‚¨ÖÔ∏è‚û°Ô∏è**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏
- **‚¨ÜÔ∏è‚¨áÔ∏è**: –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π/—Å–æ—Å–µ–¥–Ω–µ–π –∑–∞–¥–∞—á–µ
- **–ü–æ–¥—Å–≤–µ—Ç–∫–∞**: –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è

üìÅ `templates/textbook/problem_view.html`

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ë–ª–∏–∂–∞–π—à–∏–µ (1-2 –Ω–µ–¥–µ–ª–∏):
- [ ] –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–ª–∞–≤ –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é PDF
- [ ] Bulk OCR: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] –ü–æ–∏—Å–∫ –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º –≤ –±–∞–∑–µ
- [ ] AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –∑–∞–¥–∞—á

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1 –º–µ—Å—è—Ü):
- [ ] –ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π: —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Markdown/LaTeX
- [ ] REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞–¥–∞—á

---



### üîß –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

#### Retry Logic —Å Exponential Backoff
```rust
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
retry_with_backoff(&config, "AI parse", || async {
    self.ai_parse(text).await
}).await
```
- 3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- Jitter –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è thundering herd
- Circuit breaker –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ—à–∏–±–æ–∫

üìÅ `src/services/retry.rs`

#### AI Parse Cache
- SHA256-based –∫–ª—é—á–∏ –¥–ª—è OCR —Ç–µ–∫—Å—Ç–∞
- TTL: 7 –¥–Ω–µ–π (AI –ø–∞—Ä—Å–∏–Ω–≥ –¥–æ—Ä–æ–≥–æ–π –∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
- –ê–≤—Ç–æ-–æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π

üìÅ `src/services/cache.rs`

#### Data Validation
- –ü—Ä–æ–≤–µ—Ä–∫–∞ LaTeX —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (unclosed $, {}, [])
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á (–ø—Ä–æ–ø—É—Å–∫–∏, –¥—É–±–ª–∏–∫–∞—Ç—ã)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ OCR –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

üìÅ `src/services/validation.rs`

---

## üì° API Reference (–ù–æ–≤—ã–µ endpoints)

### Batch Processing
```
POST /api/batch/ocr           # Batch OCR (10-100 —Å—Ç—Ä–∞–Ω–∏—Ü)
POST /api/batch/solve         # Batch solve problems
GET  /api/jobs                # List all jobs
GET  /api/jobs/{id}           # Get job status/progress
POST /api/jobs/{id}/cancel    # Cancel running job
```

### Export
```
POST /api/export/book         # Export entire book
GET  /api/export/chapter/{id} # Export single chapter
# Formats: markdown, latex, json, anki
```

### Validation & Search
```
POST /api/validate/chapter    # Validate chapter data
POST /api/search/formula      # Search by LaTeX formula
```

---


---

## üéØ Killer Features (–§–µ–≤—Ä–∞–ª—å 2026)

### 3. WebSocket Real-time Progress ‚è±Ô∏è
- **WebSocket endpoint**: `/ws/jobs`
- **Live progress updates** –¥–ª—è batch OCR/solve –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ö–æ–º–∞–Ω–¥—ã –∫–ª–∏–µ–Ω—Ç–∞**: `watch`, `unwatch`, `watch_all`, `ping`
- **Heartbeat** –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```javascript
const ws = new WebSocket('ws://localhost:8081/ws/jobs');
ws.send(JSON.stringify({ action: 'watch', job_id: '...' }));
// –ü–æ–ª—É—á–∞–µ–º: { type: 'job_update', job_id: '...', status: {...} }
```

üìÅ `src/handlers/websocket.rs`

---

### 4. Auto-TOC / Smart Chapter Detection üìë
- **–ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è** –∏–∑ OCR —Ç–µ–∫—Å—Ç–∞
- **–†–∏–º—Å–∫–∏–µ –∏ –∞—Ä–∞–±—Å–∫–∏–µ —Ü–∏—Ñ—Ä—ã**: "–ì–ª–∞–≤–∞ I", "–ì–ª–∞–≤–∞ 1"
- **Confidence score** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
- **Smart Import**: –ê–≤—Ç–æ-—Å–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∫–Ω–∏–≥–∏

**API:**
```
POST /api/smart/detect_toc      # –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å TOC –∏–∑ —Ç–µ–∫—Å—Ç–∞
POST /api/smart/import_book     # –ò–º–ø–æ—Ä—Ç —Å –∞–≤—Ç–æ-–≥–ª–∞–≤–∞–º–∏
```

üìÅ `src/services/toc_detector.rs`

---

### 6. Knowledge Graph üï∏Ô∏è
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤—è–∑–µ–π** –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏
- **Force-directed layout** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–£–∑–ª—ã**: –ì–ª–∞–≤—ã, —Ç–µ–º—ã, –∫–æ–Ω—Ü–µ–ø—Ç—ã, —Ñ–æ—Ä–º—É–ª—ã, –∑–∞–¥–∞—á–∏
- **–†—ë–±—Ä–∞**: Contains, Requires, Related, Similar, LeadsTo
- **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è** –ø–æ —Ç–µ–º–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**API:**
```
POST /api/graph/build           # –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ –¥–ª—è –≥–ª–∞–≤—ã
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "nodes": [{ "id": "chapter:1", "label": "–ê–ª–≥–µ–±—Ä–∞", "size": 45 }],
  "edges": [{ "source": "chapter:1", "target": "problem:123" }],
  "clusters": [{ "id": "cluster_0", "label": "Topic 1" }]
}
```

üìÅ `src/services/knowledge_graph.rs`

---

### 7. Auto-tagging üè∑Ô∏è
- **AI-powered tagging** —á–µ—Ä–µ–∑ Mistral
- **Fallback** –Ω–∞ rule-based –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ–≥–æ–≤**:
  - Subject: –∞–ª–≥–µ–±—Ä–∞, –≥–µ–æ–º–µ—Ç—Ä–∏—è, —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è
  - Topic: —É—Ä–∞–≤–Ω–µ–Ω–∏—è, —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ
  - Method: –º–µ—Ç–æ–¥—ã —Ä–µ—à–µ–Ω–∏—è
  - Concept: –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–Ω—è—Ç–∏—è
  - Difficulty: easy, medium, hard, olympiad

**API:**
```
POST /api/smart/auto_tag        # –ê–≤—Ç–æ-—Ä–∞–∑–º–µ—Ç–∫–∞ –∑–∞–¥–∞—á
```

üìÅ `src/services/auto_tagger.rs`

---

### 8. Similar Problems Detection üîç
- **–ú–Ω–æ–≥–æ–º–µ—Ä–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ**: —Ñ–æ—Ä–º—É–ª—ã + –∫–æ–Ω—Ü–µ–ø—Ç—ã + —Ç–µ–∫—Å—Ç
- **Jaccard similarity** —Å –≤–µ—Å–∞–º–∏
- **–¢–∏–ø—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π**:
  - ExactFormula ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã
  - SimilarFormula ‚Äî –ø–æ—Ö–æ–∂–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
  - SharedConcepts ‚Äî –æ–±—â–∏–µ –ø–æ–Ω—è—Ç–∏—è
  - SameTopic ‚Äî –æ–¥–Ω–∞ —Ç–µ–º–∞
  - TextSimilarity ‚Äî –ø–æ—Ö–æ–∂–∏–π —Ç–µ–∫—Å—Ç

**API:**
```
POST /api/smart/similar         # –ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ –∑–∞–¥–∞—á–∏
POST /api/smart/recommend       # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏
POST /api/smart/duplicates      # –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
```

**Recommendation engine:**
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏
- Progression-based: —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —É–∂–µ —Ä–µ—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

üìÅ `src/services/similarity.rs`

---

## üì° –ü–æ–ª–Ω—ã–π API Reference

### WebSocket
```
WS   /ws/jobs                    # Real-time job progress
```

### Smart Features
```
POST /api/smart/detect_toc       # Detect TOC from text
POST /api/smart/import_book      # Import with auto-chapters
POST /api/smart/auto_tag         # AI auto-tagging
POST /api/smart/similar          # Find similar problems
POST /api/smart/recommend        # Practice recommendations
POST /api/smart/duplicates       # Find duplicate problems

POST /api/graph/build            # Build knowledge graph
```

### Batch Processing
```
POST /api/batch/ocr              # Batch OCR (10-100 pages)
POST /api/batch/solve            # Batch solve
GET  /api/jobs                   # List jobs
GET  /api/jobs/{id}              # Job status
POST /api/jobs/{id}/cancel       # Cancel job
```

### Export
```
POST /api/export/book            # Export book (md/tex/json/anki)
GET  /api/export/chapter/{id}    # Export chapter
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- [ ] **Frontend –¥–ª—è Knowledge Graph** (D3.js –∏–ª–∏ Cytoscape.js)
- [ ] **LaTeX Live Preview** –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- [ ] **PDF Upload** —á–µ—Ä–µ–∑ drag & drop
- [ ] **Conflict Resolution UI** –¥–ª—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- [ ] **User State Tracking** (–∑–Ω–∞—é/–Ω–µ –∑–Ω–∞—é)
- [ ] **Gamification** (–æ—á–∫–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)
- [ ] **API Rate Limiting**
- [ ] **Mobile Responsive UI**

---
